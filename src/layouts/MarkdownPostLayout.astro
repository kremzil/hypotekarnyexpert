---
import BaseLayout from "./BaseLayout.astro";
import { SITE } from "../config/site";

const { frontmatter } = Astro.props;
const { title, description, pubDate, author, tags, image } = frontmatter;
const formattedDate = new Intl.DateTimeFormat(SITE.dateLocale, {
  year: "numeric",
  month: "long",
  day: "2-digit"
}).format(pubDate);
---

<BaseLayout title={title} description={description} image={image?.url}>
  <article class="page-container-narrow section-space">
    <header class="mb-8">
      <p class="eyebrow text-xs text-muted">Blog</p>
      <h1 class="mt-2 text-3xl font-semibold md:text-5xl">{title}</h1>
      <p class="mt-3 text-lg text-muted">{description}</p>
      <div class="mt-4 flex flex-wrap items-center gap-3 text-sm text-muted">
        <time datetime={pubDate.toISOString()}>{formattedDate}</time>
        <span>{author}</span>
      </div>
      {image?.url && (
        <img
          class="panel mt-6 w-full"
          src={image.url}
          alt={image.alt}
        />
      )}
    </header>
    <div class="space-y-4 text-base leading-relaxed">
      <slot />
    </div>
    {tags?.length && (
      <footer class="mt-8 flex flex-wrap gap-2">
        {tags.map((tag) => (
          <span class="rounded-full bg-accent/15 px-3 py-1 text-sm">#{tag}</span>
        ))}
      </footer>
    )}
  </article>
</BaseLayout>
